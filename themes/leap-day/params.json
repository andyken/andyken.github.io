{"name":"JSONBuilder","body":"## Installation\r\n\r\nAdd the following line to your application's Gemfile:\r\n\r\n    gem 'json_builder'\r\n\r\nAnd then run:\r\n\r\n    $ bundle install\r\n\r\nOr install it yourself with:\r\n\r\n    $ gem install json_builder\r\n\r\n## Sample Usage\r\n\r\n```ruby\r\nrequire 'json_builder'\r\n\r\njson = JSONBuilder::Compiler.generate do\r\n  name 'Garrett Bjerkhoel'\r\n  email 'spam@garrettbjerkhoel.com'\r\n  url root_path\r\n  address do\r\n    street '1234 1st Ave'\r\n    street2 'Apt 1'\r\n    city 'New York'\r\n    state 'NY'\r\n    zip 10065\r\n  end\r\n  key :nil, 'testing a custom key name'\r\n  skills do\r\n    ruby true\r\n    asp false\r\n  end\r\n  longstring do\r\n    # Could be a highly intensive process that only returns a string\r\n    '12345' * 25\r\n  end\r\nend\r\n```\r\n\r\nWhich will generate:\r\n\r\n```json\r\n{\r\n  \"name\": \"Garrett Bjerkhoel\",\r\n  \"email\": \"spam@garrettbjerkhoel.com\",\r\n  \"url\": \"/\",\r\n  \"address\": {\r\n    \"street\": \"1234 1st Ave\",\r\n    \"street2\": \"Apt 1\",\r\n    \"city\": \"New York\",\r\n    \"state\": \"NY\",\r\n    \"zip\": 10065\r\n  },\r\n  \"nil\": \"testing a custom key name\",\r\n  \"skills\": {\r\n    \"ruby\": true,\r\n    \"asp\": false\r\n  },\r\n  \"longstring\": \"1234512345123451234512345...\"\r\n}\r\n```\r\n\r\nIf you'd like to just generate an array:\r\n\r\n```ruby\r\narray ['Garrett Bjerkhoel', 'John Doe'] do |name|\r\n  first, last = name.split(' ')\r\n  first first\r\n  last last\r\nend\r\n```\r\n\r\nWhich will return:\r\n\r\n```json\r\n[\r\n  {\r\n    \"first\": \"Garrett\",\r\n    \"last\": \"Bjerkhoel\"\r\n  },\r\n  {\r\n    \"first\": \"John\",\r\n    \"last\": \"Doe\"\r\n  }\r\n]\r\n```\r\n\r\nJust a note, if you use an array block as above, all other sibling method calls will be ignored.\r\n\r\n## Using JSONBuilder with Rails\r\nTo use JSONBuilder with your Rails application, make sure your controller responds to `json`:\r\n\r\n```ruby\r\nclass UsersController < ApplicationController\r\n  respond_to :json\r\n  \r\n  def index\r\n    @users = User.order('id DESC').page(params[:page]).per(2)\r\n    respond_with @users\r\n  end\r\nend\r\n```\r\n\r\nThen create your view `app/views/users/index.json.json_builder` which could look something like:\r\n    \r\n```ruby\r\ncount @users.count\r\npage @users.current_page\r\nper_page @users.per_page\r\npages_count @users.num_pages\r\nresults @users do |user|\r\n  id user.id\r\n  name user.name\r\n  body user.body\r\n  url user_url(user)\r\n  links user.links do |link|\r\n    url link.url\r\n    visits link.visits\r\n    last_visited link.last_visited\r\n  end\r\nend\r\n```\r\n\r\nThe response that is returned:\r\n\r\n```json\r\n{\r\n  \"count\": 10,\r\n  \"page\": 1,\r\n  \"per_page\": 2,\r\n  \"pages_count\": 5,\r\n  \"results\": [\r\n    {\r\n      \"id\": 1,\r\n      \"name\": \"Garrett Bjerkhoel\",\r\n      \"body\": \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod.\",\r\n      \"url\": \"http://example.com/users/garrett-bjerkhoel\",\r\n      \"links\": [\r\n        {\r\n          \"url\": \"http://github.com/\",\r\n          \"visits\": 500,\r\n          \"last_visited\": \"2011-11-271T00:00:01Z\"\r\n        },\r\n        {\r\n          \"url\": \"http://garrettbjerkhoel.com/\",\r\n          \"visits\": 1500,\r\n          \"last_visited\": \"2011-11-261T00:00:01Z\"\r\n        }\r\n      ]\r\n    }, {\r\n      \"id\": 2,\r\n      \"name\": \"John Doe\",\r\n      \"body\": \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod.\",\r\n      \"url\": \"http://example.com/users/john-doe\",\r\n      \"links\": [\r\n        {\r\n          \"url\": \"http://google.com/\",\r\n          \"visits\": 11000,\r\n          \"last_visited\": \"2010-05-221T00:00:01Z\"\r\n        },\r\n        {\r\n          \"url\": \"http://twitter.com/\",\r\n          \"visits\": 155012857,\r\n          \"last_visited\": \"2011-11-261T00:00:01Z\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n### Including JSONP callbacks\r\n\r\nOut of the box JSONBuilder supports JSONP callbacks when used within a Rails project just by using the `callback` parameter. For instance, if you requested `/users.json?callback=myjscallback`, you'll get a callback wrapping the response:\r\n\r\n```json\r\nmyjscallback([\r\n  {\r\n    \"name\": \"Garrett Bjerkhoel\"\r\n  },\r\n  {\r\n    \"name\": \"John Doe\"\r\n  }\r\n])\r\n```\r\n\r\nTo turn off JSONP callbacks globally or just per-environment:\r\n\r\n#### Globally\r\n\r\n```ruby\r\nActionView::Base.json_callback = false\r\n```\r\n\r\n#### Per Environment\r\n\r\n```ruby\r\nSample::Application.configure do\r\n  config.action_view.json_callback = false\r\nend\r\n```\r\n\r\n### Pretty Print Output\r\n\r\nOut of the box JSONBuilder supports pretty printing only during development, it's disabled by default in other environments for performance. If you'd like to enable or disable pretty printing you can do it within your environment file or you can do it globally.\r\n\r\nWith pretty print on:\r\n\r\n```json\r\n{\r\n  \"name\": \"Garrett Bjerkhoel\",\r\n  \"email\": \"spam@garrettbjerkhoel.com\"\r\n}\r\n```\r\n\r\nWithout:\r\n\r\n```json\r\n{\"name\": \"Garrett Bjerkhoel\", \"email\": \"spam@garrettbjerkhoel.com\"}\r\n```\r\n\r\n#### Per Environment\r\n\r\n```ruby\r\nSample::Application.configure do\r\n  config.action_view.pretty_print_json = false\r\nend\r\n```\r\n\r\n#### Globally\r\n\r\n```ruby\r\nActionView::Base.pretty_print_json = false\r\n```\r\n\r\n## Speed\r\nJSONBuilder is very fast, it's roughly 3.6 times faster than Builder based on the [speed benchmark](https://github.com/dewski/json_builder/blob/master/spec/benchmarks/builder.rb).\r\n\r\n                 user       system      total       real\r\n    JSONBuilder  2.950000   0.010000    2.960000    (2.968790)\r\n        Builder  10.820000  0.040000    10.860000   (10.930497)\r\n\r\n## Alternative libraries\r\n\r\nThere are alternatives to JSONBuilder, each good in their own way with different API's and design approaches that are worth checking out. Although, I would love to hear why JSONBuilder didn't fit your needs, by message or issue.\r\n\r\n * [jbuilder](https://github.com/rails/jbuilder)\r\n * [RABL](https://github.com/nesquena/rabl)\r\n * [Tequila](https://github.com/inem/tequila)\r\n * [Argonaut](https://github.com/jbr/argonaut)\r\n * [Jsonify](https://github.com/bsiggelkow/jsonify)\r\n * [RepresentationView](https://github.com/mdub/representative_view)\r\n\r\n## Copyright\r\nCopyright Â© 2012 Garrett Bjerkhoel. See [MIT-LICENSE](http://github.com/dewski/json_builder/blob/master/MIT-LICENSE) for details.","tagline":"JSONBuilder is to JSON as Builder is to XML","google":""}